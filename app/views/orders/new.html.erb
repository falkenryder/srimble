<div class="container">
  <div class="row justify-content-center">
    <div class="col-sm-12 col-md-6" >
      <h1>New Order</h1>
      <div data-controller="order-form">
        <%= simple_form_for [@supplier, @order] do |f| %>
          <%= f.association :supplier, selected: @supplier, class: "form-select" %>
          <%= f.input :delivery_date %>
          <%= f.input :delivery_address, collection: current_user.delivery_addresses , class: "form-select" %>

            <div class="container p-0">
            <template data-order-form-target="template">
              <%= f.simple_fields_for :order_details, OrderDetail.new, child_index: 'TEMPLATE_RECORD' do |f| %>
                <%= render partial: 'order_details', locals: { f: f, supplier: @supplier } %>
              <% end %>
            </template>
            <%= f.simple_fields_for :order_details, OrderDetail.new, child_index: 'TEMPLATE_RECORD' do |f| %>
                <%= render partial: 'order_details', locals: { f: f, supplier: @supplier } %>
            <% end %>
              <div data-order-form-target="add_detail">
                <%= link_to "Add", '#', data: { action: "click->order-form#add_association" } %>
              </div>
            </div>




          <%= f.input :comments %>
          <div class="row">
            <p>Grand Total</p>
            <p id="grandtotal" >0</p>
          </div>
          <%= f.button :submit %>
        <% end %>
      </div>
    </div>
  </div>
</div>
